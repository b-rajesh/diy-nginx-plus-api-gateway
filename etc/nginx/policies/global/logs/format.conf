log_format api_main '$remote_addr - $remote_user [$time_local] "$request"'
                    ' $status $body_bytes_sent "$http_referer" "$http_user_agent"'
                    ' "$http_x_forwarded_for"';


log_format api_json escape=json '{'
                              '"current-time": "$time_local",'
                              '"core": {'
                                '"body_bytes_sent": "$body_bytes_sent",'
                                '"remote-addr": "$remote_addr",'
                                '"remote-user": "$remote_user",'
                                '"realip-remote-addr": "$realip_remote_addr ",'
                                '"request": "$request",'
                                '"http": {'
                                  '"http-referer": "$http_referer",'
                                  '"http-user-agent": "$http_user_agent",'
                                  '"http-x-forwarded-for": "$http_x_forwarded_for"'
                                '},'
                                '"api": {'
                                    '"api-name" : "$api_name",'
                                    '"request-uri" : "$request_uri",'
                                    '"request-method" : "$request_method",'
                                    '"request-time" : "$request_time",'
                                    '"request-id" : "$request_id",'
                                    '"upstream-response-time" : "$upstream_response_time"'
                                '}'
                              '}'
                            '}';
